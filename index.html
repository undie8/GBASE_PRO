<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GBase System</title>
    <script src="config.js"></script>
    <script>
        async function loadApp() {
            const params = new URLSearchParams(window.location.search);
            const target = params.get('p') || 'index.html';
            try {
                const res = await fetch(CONFIG.SCRIPT_URL + "?get=loadLatest&file=" + target);
                const data = await res.json();
                if (data.code) {
                    const cleanPath = target === 'index.html' ? '' : target.replace('.html', '');
                    window.history.replaceState(null, '', window.location.origin + window.location.pathname.split('/').slice(0, -1).join('/') + '/' + cleanPath);
                    document.open(); document.write(data.code); document.close();
                } else { throw new Error("File not found"); }
            } catch (e) {
                document.body.innerHTML = `<div style="background:#0f172a;color:#64748b;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:sans-serif;">
                    <p>ระบบขัดข้อง: ${e.message}</p>
                    <a href="${CONFIG.SCRIPT_URL}?page=hub" style="margin-top:15px;color:#3b82f6;text-decoration:none;font-size:12px;font-weight:bold;">ไปหน้า Code Hub</a>
                </div>`;
            }
        }
        window.onload = loadApp;
    </script>
</head>
<body style="background:#0f172a; display:flex; align-items:center; justify-content:center; height:100vh;">
    <div style="color:#3b82f6; font-size:10px; font-weight:bold; letter-spacing:2px; animation:pulse 1s infinite;">SYNCING...</div>
    <style>@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }</style>
</body>
</html>
